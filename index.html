<!DOCTYPE html>
<html lang="en">
<!-- TODO
fullscreen button, donate button
download and print for chart (like in base convert)
console with clear button
custom seperators (slash, space etc)
make js onload function

shareme, google analytics, icon/favicon

quiz on converting
feature to read outlout
 -->
<head>
<title>Morse Code Converter</title>
<meta charset="utf-8">
<meta name="title=" content="Morse Code Converter">
<meta name="robots" content="index, follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Use Morse Code Converter to convert both ways between English and Morse code">
<meta name="keywords" content="morse code, converter, morse, code, convert, to english, to morse code, english">

<meta id="metaColor1" name="theme-color" content="#ccc">
<meta id="metaColor2" name="msapplication-navbutton-color" content="#ccc">
<meta id="metaColor3" name="apple-mobile-web-app-status-bar-style" content="#ccc">
<!-- <link rel="icon" href="favicon.png" type="image/png" sizes="48x48"> -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>  

<style type="text/css">
* {
	text-align: center !important;
}
body {
	margin: 20px;
}
#morse, #english, tbody {
	font-weight: 900;
}
::placeholder {
	font-weight: 400;
}
::-webkit-input-placeholder { /* Chrome/Opera/Safari */
  font-weight: 400;
}
::-moz-placeholder { /* Firefox 19+ */
	font-weight: 400;
}
:-ms-input-placeholder { /* IE 10+ */
  font-weight: 400;
}
:-moz-placeholder { /* Firefox 18- */
	font-weight: 400;
}
::selection {
	background: #999;
	color: #fff;;
}
::-moz-selection {
	background: #999;
	color: #fff;
}
button i.fa-times, button i.fa-copy, button i.fa-search {
  transition: all .2s ease-in-out;
}
button:active i.fa-search {
  transform: scale(1.2);
}
button:active i.fa-copy, button:active i.fa-times {
  transform: scale(1,-1);
}
</style>

</head>
<body>
<h1>
<img src="icon.svg" width="64px">
<!-- <i class="fas fa-exchange-alt"></i>  -->
Morse Code Converter</h1>
<p>Press <kbd>Enter</kbd> to convert</p>

<label for="english"><u>English:</u></label>
<div class="input-group">
<button id="copyEnglish" tabindex="-1" title="Click to copy input" type="button" class="btn btn-lg btn-secondary"><i class="fas fa-copy"></i></button>
<input id="english" type="text" autofocus class="form-control input-lg" placeholder="Enter English text to convert..." aria-label="english text" aria-describedby="basic-addon" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
<button id="clearEnglish" tabindex="-1" title="Click to clear input" type="button" class="btn btn-lg btn-danger"><i class="fas fa-times"></i></button>
</div>

<label for="morse"><u>Morse:</u></label>
<div class="input-group">
<button id="copyMorse" tabindex="-1" title="Click to copy input" type="button" class="btn btn-lg btn-secondary"><i class="fas fa-copy"></i></button>
<input id="morse" type="text" autofocus class="form-control input-lg" placeholder="Enter Morse Code text to convert..." aria-label="morse code text" aria-describedby="basic-addon" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
<button id="clearMorse" tabindex="-1" title="Click to clear input" type="button" class="btn btn-lg btn-danger"><i class="fas fa-times"></i></button>
</div>
<br>

<div class="alert alert-info alert-dismissible fade show">
<button type="button" tabindex="-1" class="close" data-dismiss="alert" aria-label="close">&times;</button>
<p>Space between characters represented with spaces, space between words represented with slashes ( / )</p>
</div>

<br><hr><br>

<u>Conversion Table</u>
<div class="input-group">
<input id="search" type="search" class="form-control input-sm" placeholder="Search the table..." aria-label="search table" aria-describedby="basic-addon" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
<button id="searchButton" tabindex="-1" title="Click to search the table" type="button" class="btn btn-sm"><i class="fas fa-search"></i></button>
</div>
<table class="table table-striped table-sm"><tbody id="tbody"></tbody></table>

Read about Morse Code on <a href="https://en.wikipedia.org/wiki/Morse_code" target="_blank"><i class="fab fa-wikipedia-w"></i> Wikipedia</a><br>
Also read more on <a href="https://morsecode.scphillips.com/morse2.html" target="_blank">scphillips.com</a><br>
Contact me at <a href="mailto:justingolden@rgbstudios.org" target="_blank"><i class="fas fa-envelope"></i> justingolden@rgbstudios.org</a>

<script type="text/javascript">

let english = $('#english');
let morse = $('#morse');
//convert back to get rid of invalid input
english.on('change', function() {
	morse.val(englishToMorse(english.val() ) );
	english.val(morseToEnglish(morse.val() ) );
});
morse.on('change', function() {
	english.val(morseToEnglish(morse.val() ) );
	morse.val(englishToMorse(english.val() ) );
});

let morVals = {
'A':'.-','B':'-...','C':'-.-.','D':'-..','E':'.','F':'..-.','G':'--.','H':'....','I':'..','J':'.---','K':'-.-','L':'.-..','M':'--','N':'-.','O':'---','P':'.--.','Q':'--.-','R':'.-.','S':'...','T':'-','U':'..-','V':'...-','W':'.--','X':'-..-','Y':'-.--','Z':'--..','0':'-----','1':'.----','2':'..---','3':'...--','4':'....-','5':'.....','6':'-....','7':'--...','8':'---..','9':'----.','?':'..--..'
};
let engVals = {
'.-':'A','-...':'B','-.-.':'C','-..':'D','.':'E','..-.':'F','--.':'G','....':'H','..':'I','.---':'J','-.-':'K','.-..':'L','--':'M','-.':'N','---':'O','.--.':'P','--.-':'Q','.-.':'R','...':'S','-':'T','..-':'U','...-':'V','.--':'W','-..-':'X','-.--':'Y','--..':'Z','-----':'0','.----':'1','..---':'2','...--':'3','....-':'4','.....':'5','-....':'6','--...':'7','---..':'8','----.':'9','..--..':'?'
};

//characters seperated by spaces, spaces between words represented as slashes
function englishToMorse(str) {
  let rtn = '';
  for(char in str) {
    if(str[char]==' ') {
      rtn += ' / ';
    } else {
      rtn += (morVals[str[char].toUpperCase() ] || '') + ' ';
    }
  }
  return rtn;
}
function morseToEnglish(str) {
  let rtn = '';
  let strs = str.split(' ');
  for(item in strs) {
    if(strs[item]=='/') {
      rtn += ' ';
    } else if(strs[item]!='') {
      rtn += engVals[strs[item] ] || '';
    }
  }
  return rtn;
}

//initial convert
english.val('sos');
english.change();
english.select();

//setup table
for(item in morVals) {
	let tr = document.createElement('tr');
	let td1 = document.createElement('td');
	let td2 = document.createElement('td');
	td1.innerHTML = item;
	td2.innerHTML = morVals[item];
	tr.appendChild(td1);
	tr.appendChild(td2);
	document.getElementById('tbody').appendChild(tr);
}

//close and copy buttons
$('#clearEnglish').on('click', function() {
	english.val('');
	english.focus();
});
$('#clearMorse').on('click', function() {
	morse.val('');
	morse.focus();
});
$('#copyEnglish').on('click', function() {
	english.select();
	document.execCommand('copy');
});
$('#copyMorse').on('click', function() {
	morse.select();
	document.execCommand('copy');
});

//search table
$('#search').on('keyup', function() {
  let value = $(this).val().toUpperCase();
  $('#tbody tr').filter(function() {
    $(this).toggle($(this).text().toUpperCase().indexOf(value) > -1)
  });
});

</script>
</body>
</html>